# Babascript

Babascript環境は、以下の2点を基本構成としたプログラミング環境だ。

- Babascript
- Babascript Client

これに加え、基本構成の機能を補完するプラグイン機構によって拡張していくことが可能だ。

Babascript環境では、プログラムに人を組み込めるようにするために、関数実行によって人に命令を送れる仕組みを持つ。
従来のプログラミング環境においては、プログラムからコンピュータに対して処理を命令し、処理結果を値として得ている。
Babascript環境では、上記のフローと同じように、プログラムから人に対して処理を命令し、処理結果を値として得られる。
関数というインタフェースを通して、人とコンピュータに対する命令をプログラム上においてほぼ同一のものとすることによって、
プログラム上において簡単に人を扱えるようにする。

以下のような流れで利用可能である。

1. 人への命令構文を実行する
2. 命令構文を元にタスクを生成する
3. 分散処理基盤を通して適切なクライアントへタスクを配信する
4.  
5. 
6. 
7.

## Script

Babascript は、人オブジェクトをプログラム上で扱えるようにしたDSLだ。
人オブジェクトにおいて定義されていない全てのメソッドが人への命令として解釈され、タスクが生成される。
また、命令に対して人からの返り値を得ると、実行メソッドの引数で指定したコールバック関数を実行する。

```coffee-script:人オブジェクトの宣言と基本命令

    baba = new Baba.Script "baba"
    baba.ほげふが (task) ->
      console.log 'hoge'

```

人オブジェクトは宣言時にIDを指定することによって、どのクライアントに対して処理を配信するかを決定する。
指定されたIDを監視するクライアントにのみ、タスク情報が配信される。

### オプション情報の付加

## Client

Babascript Clientは、Babascriptからの命令受信と処理結果の送信機能を実現するクライアントライブラリだ。



## Plugin

Babascript Pluginは、Babascript及びBabascriptClientに組み込むことのできるプラグイン機構だ。
プラグインとして読み込んだ
各種プラグインは、Babascript及びBabascriptClientが発行するイベントとデータを受け取ることができる。
現在対応しているイベントは、以下の通りだ。

- init(プラグイン組み込み時)
- connect(ネットワーク接続時)
- send(タスクの送信時)
- receive(タスクの受信時)


具体的には、以下のようなプラグインの実装が挙げられる。

- ログコレクター
- データ同期
- ユーザ管理


## 通信と分散処理

scriptとclientのタスク送受信と分散配信のために、node-linda\cite{linda}を利用した。

## 実装

## サンプルプログラム